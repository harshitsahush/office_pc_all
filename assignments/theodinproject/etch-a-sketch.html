<html>
    <head>
        <title>Etch-a-sketch</title>

        <style>

            .remove{                        /* will remove the element */
                display: none;
            }

            .main_container{
                height:500px;
                width:500px;
                display: flex;              /* to arrange the child blocks */
                flex-wrap: wrap;
                border: 2px solid black;
            }

            .block-active{
                background-color: grey;
            }

        </style>

        <script>
            document.addEventListener("DOMContentLoaded", ()=>{
                
                document.addEventListener("click", function(e){
                    if(e.target.id=="ok-button")
                    {
                        if(document.getElementById("input_number").value=="" || document.getElementById("input_number").value<1 || document.getElementById("input_number").value>=100)
                        {
                            alert("Please input a value >0 and <=100");
                        }

                        else
                        {  
                            //clear the drawing space
                            document.getElementsByClassName("main_container")[0].textContent = "";
                            

                            let num = document.getElementById("input_number").value; 
                            let calc = 500/num;             //bc the total height/width is 400
                            
                            //create a block and run a loop appropriate time to add them to main container
                            let child_element=document.createElement("div");
                            child_element.setAttribute("style", "height:"+calc+"px;"+"width:"+calc+"px;flex-shrink:0;");
                            child_element.classList.add("block");

                            for(let i=0; i<num*num; i++)        //since we want a grid of num*num
                            {   
                                document.getElementsByClassName("main_container")[0].appendChild(child_element.cloneNode(true));
                            }

                            document.addEventListener("mouseover", function(e){
                                if(e.target.className == "block")
                                {
                                    if(document.getElementById("color-select").selectedIndex == 0)      //grey is selected
                                    {
                                        e.target.style.backgroundColor = "grey";
                                    }
                                    if(document.getElementById("color-select").selectedIndex == 1)      //rainbow is selected
                                    {
                                        var randomColor = Math.floor(Math.random()*16777215).toString(16);
                                        e.target.style.background = "#"+randomColor;
                                    }
                                }
                            });
                            
                        }
                    }
                });


            });
        </script>
    </head>



    <body>
        <div class="input_window">
            <p>Please enter the number of rows/columns</p>
            <input type="number" id="input_number" value=""/>
            <select name="color" id="color-select">
                <option value="grey">Grey(default)</option>
                <option value="rainbow">Rainbow</option>
            </select>
            <button id="ok-button">OK</button>
        </div>
        <br><br>
        <div class="main_container">
        </div>
    </body>
</html>